-function(){"use strict";var h=function(a){return"gwd-page"==a.tagName.toLowerCase()||"gwd-page"==a.getAttribute("is")},k=function(a){if(h(a))return a;for(;a&&9!=a.nodeType;)if((a=a.parentElement)&&h(a))return a;return null},l=function(a,b,c){a=parseInt(a.getAttribute(b),10);isNaN(a)&&(a=c);return a},m=function(a,b,c,d){d=d||b;a.hasAttribute(b)?(a=a.getAttribute(b),c.setAttribute(d,a)):c.removeAttribute(d)};var n=["-ms-","-moz-","-webkit-",""],p=function(a,b,c,d){for(var e,g,f=0;f<n.length;++f)e=n[f]+b,g=(d?n[f]:"")+c,a.style.setProperty(e,g)};var q=function(a,b,c){var d;c?(d=document.createEvent("CustomEvent"),d.initCustomEvent(a,!0,!0,c)):(d=document.createEvent("Event"),d.initEvent(a,!0,!0));b.dispatchEvent(d);return d},r=function(a,b){var c=function(d){a.removeEventListener("attached",c);b(d)};a.addEventListener("attached",c)};var t=function(a){a=a.trim();return window.Enabler?Enabler.getUrl(a):a};var u=function(a){var b=document.createElement("img","gwd-image");b.setAttribute("source",a);return b},v=function(a){var b=[];if(a){a=a.split(",");for(var c=0;c<a.length;++c)/\S/.test(a[c])&&b.push(u(t(a[c])))}return b},w=function(a,b){for(var c=document.createElement("div","gwd-page"),d,e=0;e<a.length;++e)d=a[e],p(d,"user-select","none"),d.classList.add("frame"),b&&b(d),c.appendChild(d);r(c,c.gwdLoad.bind(c));return c},y=function(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];"img"==e.tagName.toLowerCase()&&
"gwd-image"==e.getAttribute("is")&&(null!=b?e.setAttribute("scaling",b):e.removeAttribute("scaling"))}},z=function(a,b){for(var c=b.length,d=b.splice(0,c),e,g=0;g<c;g++)e=d[g],"frameshown"==e?q(e,a,{id:a.currentIndex}):q(e,a)},A=function(a,b){return(a%b+b)%b};var B=function(a){return{autoplay:a.hasAttribute("autoplay"),m:l(a,"frame-width",160),D:l(a,"frame-height",80),G:l(a,"neighbor-rotation-y",38),H:l(a,"neighbor-translation-x",20),I:l(a,"neighbor-translation-y",-8),J:l(a,"neighbor-translation-z",-80),transitionDuration:l(a,"transition-duration",600),K:a.hasAttribute("show-reflection"),L:l(a,"start-frame",2)}},C=function(a,b,c,d){var e=0;a=w(a,function(a){a.style.left=e+"px";a.style.width=b+"px";a.style.height=c+"px";e+=b});a.className="container"+(d?
" reflection":"");return a},D=function(a,b,c,d,e){b="translate3d("+b+"px, "+c+"px, "+d+"px)";e&&(b="rotate3d(0, 1, 0, "+e+"deg) "+b);p(a,"transform",b)},E=function(a,b){p(a,"transition","transform "+b+"ms",!0)};var F=function(a,b){return setInterval(a,b)};document.registerElement&&document.registerElement("gwd-carouselgallery",{prototype:Object.create(HTMLElement.prototype,{createdCallback:{value:function(){this.o=!1;this.g=null;this.a=0;this.u=this.b=-1;this.q=0;this.c=[];var a=document.createElement("gwd-gesture");a.className="gesture";this.f=a;this.C=this.onTrackStart_.bind(this);this.B=this.onTrack_.bind(this);this.A=this.onTrackEnd_.bind(this);this.w=this.onTap_.bind(this);this.l=q.bind(null,"firstinteraction",this);this.v=this.onFramesLoad_.bind(this);
this.r=!1;this.p=[];this.i=z.bind(null,this,this.p);this.k=[];this.F=1;this.t=0;if(this.n=this.hasAttribute("images"))for(;this.firstChild;)this.removeChild(this.firstChild);this.d=B(this);this.s=this.j=0;this.e=this.h=null},enumerable:!0},attachedCallback:{value:function(){this.j=this.j||this.clientWidth/2;this.f.addEventListener("trackstart",this.C,!1);this.f.addEventListener("track",this.B,!1);this.f.addEventListener("trackend",this.A,!1);this.f.addEventListener("tap",this.w,!1);this.addEventListener("transitionend",
this.i,!1);this.addEventListener("webkitTransitionEnd",this.i,!1);if("function"==typeof this.gwdLoad&&"function"==typeof this.gwdIsLoaded&&!this.gwdIsLoaded()){var a=k(this),b=a&&"function"==typeof a.gwdIsLoaded;(!a||b&&a.gwdIsLoaded())&&this.gwdLoad()}},enumerable:!0},detachedCallback:{value:function(){this.f.removeEventListener("trackstart",this.C,!1);this.f.removeEventListener("track",this.B,!1);this.f.removeEventListener("trackend",this.A,!1);this.f.removeEventListener("tap",this.w,!1);this.removeEventListener("transitionend",
this.i);this.removeEventListener("webkitTransitionEnd",this.i)},enumerable:!0},currentIndex:{enumerable:!0,get:function(){return this.a?this.b+1:void 0}},goToFrame:{value:function(a,b){var c="none"!=b,d=this.d.transitionDuration;0<a&&a<=this.a&&(this.stopRotation(),this.setTransition_(c?d:0),this.centerFrame_(a-1))},enumerable:!0},goBackwards:{value:function(a){this.goToFrame(this.currentIndex-1,a||"slide")},enumerable:!0},goForwards:{value:function(a){this.goToFrame(this.currentIndex+1,a||"slide")},
enumerable:!0},rotateOnce:{value:function(a,b){var c=a||this.d.transitionDuration*this.a,d=b||"forwards",e=this.d.transitionDuration;this.a&&!this.h&&(this.s=this.b,this.setTransition_(e),this.updateFrames_(A(this.b+("left"==d||"backwards"==d?-1:1),this.a),0),this.h=F(function(){this.updateFrames_(A(this.b+("left"==d||"backwards"==d?-1:1),this.a),0);this.s==this.b&&this.stopRotation()}.bind(this),c/this.a))},enumerable:!0},stopRotation:{value:function(){this.h&&(clearInterval(this.h),this.h=null)},
enumerable:!1},gwdIsLoaded:{value:function(){return this.o},enumerable:!0},gwdLoad:{value:function(){if(!this.o&&!this.g){var a;if(this.n)a=v(this.getAttribute("images"));else{a=this.childNodes;for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];e.nodeType==Node.ELEMENT_NODE&&b.push(e)}a=b}this.c=a;this.loadFrames_()}},enumerable:!0},getFrame:{value:function(a){return this.c&&this.c[a-1]},enumerable:!0},loadFrames_:{value:function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.e=null;
this.g&&this.g.removeEventListener("pageload",this.v,!1);var a=this.d;this.g=a=C(this.c,a.m,a.D,a.K);a.addEventListener("pageload",this.v,!1);y(this.c,this.getAttribute("scaling"));this.appendChild(a);this.appendChild(this.f)},enumerable:!1},onFramesLoad_:{value:function(a){if(this.g===a.target){this.o=!0;this.a=this.c.length;this.k=[];if(this.t=this.a){a=this.d.L-1;if(0>a||a>=this.a)a=0;this.setTransition_(0);this.centerFrame_(a);this.d.autoplay&&setTimeout(this.rotateOnce.bind(this),0)}this.updateNavigationElement_();
q("allframesloaded",this);q("ready",this)}},enumerable:!1},attributeChangedCallback:{value:function(a){switch(a){case "images":this.n=!0;this.a=0;this.b=-1;this.c=v(this.getAttribute(a));this.loadFrames_();break;case "has-navigation":case "navigation-highlight":case "navigation-thumbnails":this.updateNavigationElement_();break;case "scaling":y(this.c,this.getAttribute("scaling"));break;case "style":case "class":break;default:this.d=B(this)}},enumerable:!0},onTrackStart_:{value:function(){this.a&&
(this.stopRotation(),this.q=this.b,this.setTransition_(0))},enumerable:!1},onTrack_:{value:function(a){if(this.a){this.l&&(this.l(),this.l=null);a=-a.dx/this.d.m;var b=Math.round(a);this.updateFrames_(this.q+b,a-b)}},enumerable:!1},onTrackEnd_:{value:function(){if(this.a){this.setTransition_(this.d.transitionDuration);var a=this.b;this.centerFrame_(a);this.q!=a&&(0==a?q("reachleftend",this):a==this.a-1&&q("reachrightend",this))}},enumerable:!1},onTap_:{value:function(){this.a&&q("frametap",this,{id:this.currentIndex})},
enumerable:!1},setTransition_:{value:function(a){this.r=0<a;this.g&&E(this.g,a);for(var b=0;b<this.a;++b)E(this.c[b],a)},enumerable:!1},centerFrame_:{value:function(a){this.c[a]&&(this.b=a,this.updateFrames_(a,0,this.a),this.p.push("frameshown"),this.k[a]||(this.k[a]=!0,--this.t||this.p.push("allframesviewed")));this.r||this.i()},enumerable:!1},updateFrames_:{value:function(a,b,c){for(var d=this.d,e,g=c||1,f=-g;f<=g;++f)if((c=this.c[f+a])&&0<=b*f){0>f?e=1-Math.abs(b):0<f?e=Math.abs(b)-1:(this.b=a,
e=b);var x=Math.abs(e);D(c,d.H*e,d.I*x,d.J*x,d.G*e)}this.u!=this.b&&(this.u=this.b,q("frameactivated",this,{id:this.currentIndex}));D(this.g,this.j-(a+b+.5)*d.m,0,0)},enumerable:!1},updateNavigationElement_:{value:function(){var a=this.hasAttribute("has-navigation"),b=!!this.e;a&&!b?(a=this.id||this.getAttribute("data-gwd-grp-id"),this.e=document.createElement("gwd-gallerynavigation"),this.e.setAttribute("for",a),this.classList.add("has-navigation"),this.appendChild(this.e)):!a&&b&&(this.classList.remove("has-navigation"),
this.removeChild(this.e),this.e=null);this.e&&(m(this,"navigation-highlight",this.e,"highlight"),m(this,"navigation-thumbnails",this.e,"use-thumbnails"))}},frameSnapInterval:{get:function(){return this.F}},frameCount:{get:function(){return this.a}}})});}()
